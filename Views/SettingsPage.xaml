<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="CatDex.Views.SettingsPage"
             Title="Settings">
    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">
            <Label 
                Text="Appearance"
                FontSize="24"
                FontAttributes="Bold"
                HorizontalOptions="Center" 
                Margin="0,20,0,10"/>

            <Border 
                StrokeThickness="2"
                Padding="20"
                BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray900}}">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="10"/>
                </Border.StrokeShape>
                <VerticalStackLayout Spacing="10">
                    <Label 
                        Text="Theme"
                        FontSize="18"
                        FontAttributes="Bold"/>
                    <Picker 
                        ItemsSource="{Binding ThemeOptions}"
                        SelectedItem="{Binding SelectedTheme}"
                        Title="Select Theme"
                        FontSize="16"/>
                </VerticalStackLayout>
            </Border>

            <Label 
                Text="Database Statistics"
                FontSize="24"
                FontAttributes="Bold"
                HorizontalOptions="Center" 
                Margin="0,20,0,10"/>

            <ActivityIndicator 
                IsRunning="{Binding IsBusy}"
                IsVisible="{Binding IsBusy}"
                HorizontalOptions="Center"
                VerticalOptions="Center" />

            <VerticalStackLayout Spacing="15" IsVisible="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}">
                <Border 
                    StrokeThickness="2"
                    Padding="20"
                    BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray900}}">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="10"/>
                    </Border.StrokeShape>
                    <VerticalStackLayout Spacing="5">
                        <Label 
                            Text="Total Cats"
                            FontSize="16"
                            TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray200}}"/>
                        <Label 
                            Text="{Binding TotalCats}"
                            FontSize="32"
                            FontAttributes="Bold"
                            HorizontalOptions="Center"/>
                    </VerticalStackLayout>
                </Border>

                <Border 
                    StrokeThickness="2"
                    Padding="20"
                    BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray900}}">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="10"/>
                    </Border.StrokeShape>
                    <VerticalStackLayout Spacing="5">
                        <Label 
                            Text="Favorite Cats"
                            FontSize="16"
                            TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray200}}"/>
                        <Label 
                            Text="{Binding FavoriteCats}"
                            FontSize="32"
                            FontAttributes="Bold"
                            HorizontalOptions="Center"/>
                    </VerticalStackLayout>
                </Border>

                <Border 
                    StrokeThickness="2"
                    Padding="20"
                    BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray900}}">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="10"/>
                    </Border.StrokeShape>
                    <VerticalStackLayout Spacing="5">
                        <Label 
                            Text="Created Cats"
                            FontSize="16"
                            TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray200}}"/>
                        <Label 
                            Text="{Binding CreatedCats}"
                            FontSize="32"
                            FontAttributes="Bold"
                            HorizontalOptions="Center"/>
                    </VerticalStackLayout>
                </Border>

                <Button 
                    Text="Refresh"
                    Command="{Binding RefreshCommand}"
                    HorizontalOptions="Center"
                    Margin="0,20,0,0"/>

                <Button 
                    Text="Delete Non-Created and Non-Favorite Cats"
                    Command="{Binding DeleteNonCreatedNonFavoriteCommand}"
                    HorizontalOptions="Center"
                    BackgroundColor="#DC3545"
                    TextColor="White"
                    Margin="0,10,0,0"/>
            </VerticalStackLayout>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
